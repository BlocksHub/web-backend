"use strict";$(document).on("click","#updateStatusClick",function(){var a=$("#newStatusValue").val();""!==a&&1<=a.length&&255>=a.length?request("/auth/status","PATCH",JSON.stringify({status:a})).then(function(){success("Success! Your status has been updated.")})["catch"](function(a){warning(a.responseJSON.message)}):warning("Error: Your status must be between 1 and 255 characters. Please try again.")}),request("/notifications/count","GET").then(function(a){$("#user-notifications-mobile").html(number_format(a.count))}),$(function(){function a(a){$("#feedLoader").show(),d=!0,request("/auth/feed/friends?limit=10&offset="+a,"GET").then(function(b){d=!1,0===a&&$("#userFeedDiv").empty(),f+=10;var c=[];b.forEach(function(a){c.push(a.userId);var b=moment(a.date).format("MMMM Do YYYY, h:mm a");$("#userFeedDiv").append("<div class=\"col-sm-12\"><hr /></div><div style=\"\" class=\"col-4 col-lg-2\"><img style=\"width:100%;display:block;margin:0 auto;\" data-userid=\""+a.userId+"\" src=\""+window.subsitutionimageurl+"\" /></div><div class=\"col-8 col-lg-10\" style=\"padding-left: 0;\"><div class=\"row\"><div class=\"col-12\"><h6 class=\"text-left\" style=\"margin-bottom: 0;\"><a style=\"color:#212529;\" href=\"/users/"+a.userId+"/profile\"><span data-userid=\""+a.userId+"\"></span></a> <span style=\"font-size:0.65rem;font-weight:400;opacity:1;cursor:pointer;\" title=\""+b+"\">("+moment(a.date).fromNow()+")</span></h6></div><div class=\"col-12\"></div><div class=\"col-12 col-sm-9 col-lg-10\"><p style=\"font-size:0.85rem;\">"+xss(a.status)+"</p></div></div></div>")}),setUserThumbs(c),setUserNames(c),0<b.length?$("#feedLoader").show():(e=!1,$("#feedLoader").hide()),0===b.length&&0===a&&(e=!1,$("#userFeedDiv").append("<div class=\"col-12\">Your feed is empty. Make some friends!</div>"))})["catch"](function(b){d=!1,e=!1,0===a&&$("#userFeedDiv").append("<div class=\"col-12\">"+b.responseJSON.message+"</div>")})}function b(a){$("#feedLoader").show(),d=!0,request("/auth/feed/groups?limit=10&offset="+a,"GET").then(function(b){d=!1,0===a&&$("#userFeedDiv").empty(),f+=10;var c=[],g=[];b.forEach(function(a){g.push(a.thumbnailCatalogId),c.push(a.groupId);var b=moment(a.date).format("MMMM Do YYYY, h:mm a");$("#userFeedDiv").append("<div class=\"col-sm-12\"><hr /></div><div style=\"\" class=\"col-4 col-lg-2\"><img style=\"width:100%;display:block;margin:0 auto;\" data-catalogid=\""+a.thumbnailCatalogId+"\" src=\""+window.subsitutionimageurl+"\" /></div><div class=\"col-8 col-lg-10\" style=\"padding-left: 0;\"><div class=\"row\"><div class=\"col-12\"><h6 class=\"text-left\" style=\"margin-bottom: 0;\"><a style=\"color:#212529;\" href=\"/groups/"+a.groupId+"/--\"><span data-groupid=\""+a.groupId+"\"></span></a> <span style=\"font-size:0.65rem;font-weight:400;opacity:1;cursor:pointer;\" title=\""+b+"\">("+moment(a.date).fromNow()+")</span></h6></div><div class=\"col-12\"></div><div class=\"col-12 col-sm-9 col-lg-10\"><p style=\"font-size:0.85rem;\">"+xss(a.shout)+"</p></div></div></div>")}),setGroupThumbs(g),setGroupNames(c),0<b.length?$("#feedLoader").show():(e=!1,$("#feedLoader").hide()),0===b.length&&0===a&&(e=!1,$("#userFeedDiv").append("<div class=\"col-12\">Your feed is empty. Make some friends!</div>"))})["catch"](function(b){d=!1,e=!1,void 0,0===a&&($("#userFeedDiv").empty(),$("#userFeedDiv").append("<div class=\"col-12\">"+b.responseJSON.message+"</div>"))})}request("/user/"+userId+"/info","GET").then(function(a){null!==a.user_status&&""!==a.user_status&&$("#newStatusValue").attr("placeholder",a.user_status.escape())})["catch"](function(){}),request("/user/"+userId+"/friends?limit=5","GET").then(function(a){$("#userFriendsCountDiv").empty(),$("#userFriendsDiv").empty(),$("#userFriendsCountDiv").append("<p>"+a.total+"</p>");var b=[];$(a.friends).each(function(a,c){4>=a&&(null===c.UserStatus&&(c.UserStatus="..."),b.push(c.userId),$("#userFriendsDiv").append("<div class=\"row\"><div class=\"col-6 col-sm-3 text-center\" ><img src=\""+window.subsitutionimageurl+"\" data-userid=\""+c.userId+"\" class=\"card-img-top\"></div><div class=\"col text-left\"><a class=\"font-weight-bold\" href=\"/users/"+c.userId+"/profile\"><span data-userid=\""+c.userId+"\"></span></a><p style=\"font-size:0.85rem;\">&quot;"+xss(c.UserStatus)+"&quot;</p></div></div>"))}),4<a.friends.length&&$("#userFriendsDiv").append("<div class=\"row\" style=\"margin-top:1rem;\"><div class=\"col-sm-12 text-left\"><a href=\"/users/"+userId+"/friends\">See All</a></div></div>"),setUserThumbs(b),setUserNames(b),$("#myFriendsCount").html("("+a.total+")"),0===a.total&&($("#userFriendsDiv").append("You do not have any friends."),$("#userFriendsDiv").css("padding-top","0"))})["catch"](function(){void 0,$("#userFriendsCountDiv").empty(),$("#userFriendsDiv").empty(),$("#userFriendsDiv").append("You do not have any friends."),$("#userFriendsDiv").css("padding-top","0"),$("#userFriendsCountDiv").append("<p>0</p>")});var c="friends",d=!1,e=!0,f=0;$(window).scroll(function(){d||!e||$(window).scrollTop()+$(window).height()>$(document).height()-400&&("friends"===c?a(f):"groups"==c&&b(f))}),$("#use-feed-friends").click(function(){d||"friends"===c||(e=!0,c="friends",f=0,$(this).removeClass("btn-outline-success").addClass("btn-success"),$("#use-feed-groups").removeClass("btn-success").addClass("btn-outline-success"),$("#userFeedDiv").empty(),a(0))}),$("#use-feed-groups").click(function(){d||"groups"===c||(e=!0,c="groups",f=0,$(this).removeClass("btn-outline-success").addClass("btn-success"),$("#use-feed-friends").removeClass("btn-success").addClass("btn-outline-success"),$("#userFeedDiv").empty(),b(0))}),a(0)});